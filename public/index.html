<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title></title>

    <!-- External CSS -->
    <link rel="stylesheet" href="css/intro.css" />
    <link rel="stylesheet" href="css/app.css" />
    <script src="js/app.js"></script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.165.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.165.0/examples/jsm/",
          "gsap": "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js",
          "ScrollTrigger": "https://cdn.jsdelivr.net/npm/gsap@3.12.5/ScrollTrigger.js"
        }
      }
    </script>
  </head>

  <body>
    <!-- ðŸŒŸ GLASS WELCOME BOX -->
    <div id="welcomeContainer" class="welcome-container">
      <h1 id="welcomeTitle" class="welcome-title"></h1>
      <p id="welcomeText" class="welcome-text"></p>
    </div>

    <canvas id="canvas"></canvas>

    <div class="scroll-area"></div>

    <!-- ðŸŒ Globe Section -->
    <div class="globe-section" id="globeSection">
      <iframe src="globe.html" class="globe-frame"></iframe>
    </div>

    <!-- External JS -->
    <script type="module" src="js/intro.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>

    <!-- AUTH + WELCOME LOGIC -->
    <script>
      const welcomeContainer = document.getElementById("welcomeContainer");
      const welcomeTitle = document.getElementById("welcomeTitle");
      const welcomeText = document.getElementById("welcomeText");

      const token = localStorage.getItem("token");
      const user = JSON.parse(localStorage.getItem("user") || "null");

      if (token && user) {
        welcomeTitle.innerHTML = `Welcome <span class="user-name">${user.name}</span>!`;
        welcomeText.innerHTML = `
          Dive into an immersive cinematic weather experience designed to bring Earth's climate to life.
          Explore dynamic atmospheric patterns, real-time weather data, and beautifully animated visuals. <br><br>
          <strong>Scroll down to zoom into the interactive 3D globe and discover weather conditions around the world.</strong>
        `;
      } else {
        welcomeTitle.innerHTML = `Welcome!`;
        welcomeText.innerHTML = `
          Step into a visually stunning journey through Earthâ€™s weather systems with an intuitive and interactive 3D globe.
          Discover global climate insights, animated forecasts, and real-time atmospheric patterns. <br><br>
          <strong>Scroll down to zoom into the globe and find detailed weather information.</strong>
        `;
      }
    </script>
  </body>
</html>

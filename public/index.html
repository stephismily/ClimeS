<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ClimeS â€” Cinematic Weather</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Intro / Landing CSS -->
    <link rel="stylesheet" href="css/intro.css" />
    <!-- Optional shared styles (if you already use app.css elsewhere) -->
    <!-- <link rel="stylesheet" href="css/app.css" /> -->

    <link rel="icon" type="image/png" href="images/icon.png" />

    <!-- Import map for Three.js + GSAP ScrollTrigger -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.165.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.165.0/examples/jsm/",
          "gsap": "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js",
          "ScrollTrigger": "https://cdn.jsdelivr.net/npm/gsap@3.12.5/ScrollTrigger.js"
        }
      }
    </script>
  </head>

  <body>
    <!-- Fixed glass header -->
    <header>
      <div class="logo" onclick="window.location.href='index.html'">
        ClimeS
      </div>

      <nav class="nav-links">
        <a href="#features">Features</a>
        <a href="#globeSection">Globe</a>
        <a href="#about">About</a>
      </nav>

      <div class="auth-buttons">
        <button onclick="window.location.href='login.html'">Login</button>
        <button onclick="window.location.href='signup.html'">Sign Up</button>
      </div>
    </header>

    <!-- ðŸŒŸ GLASS WELCOME BOX -->
    <div id="welcomeContainer" class="welcome-container">
      <h1 id="welcomeTitle" class="welcome-title">
        Welcome!
      </h1>
      <p id="welcomeText" class="welcome-text">
        Step into a visually stunning journey through Earthâ€™s weather systems
        with an intuitive and interactive 3D globe. Discover global climate
        insights, animated forecasts, and real-time atmospheric patterns.
        <br /><br />
        <strong
          >Scroll down to zoom into the globe and find detailed weather
          information.</strong
        >
      </p>
    </div>

    <!-- 3D Starfield / Intro Canvas -->
    <canvas id="canvas"></canvas>

    <!-- Big scroll section to drive ScrollTrigger -->
    <div class="scroll-area" id="features"></div>

    <!-- ðŸŒ Globe Section -->
    <div class="globe-section" id="globeSection">
      <iframe src="globe.html" class="globe-frame"></iframe>
    </div>

    <!-- Dummy section to anchor "About" link -->
    <div id="about" style="height: 40vh;"></div>

    <!-- Intro logic: starfield + scroll + globe fade -->
    <script type="module" src="js/intro.js"></script>

    <!-- Optional: welcome text based on auth (token/user in localStorage) -->
    <script>
      const welcomeContainer = document.getElementById("welcomeContainer");
      const welcomeTitle = document.getElementById("welcomeTitle");
      const welcomeText = document.getElementById("welcomeText");

      const token = localStorage.getItem("token");
      const user = JSON.parse(localStorage.getItem("user") || "null");

      if (token && user) {
        welcomeTitle.innerHTML = `Welcome <span class="user-name">${user.name}</span>!`;
        welcomeText.innerHTML = `
          Dive into an immersive cinematic weather experience designed to bring Earth's climate to life.
          Explore dynamic atmospheric patterns, real-time weather data, and beautifully animated visuals. <br><br>
          <strong>Scroll down to zoom into the interactive 3D globe and discover weather conditions around the world.</strong>
        `;
      } else {
        welcomeTitle.innerHTML = `Welcome!`;
        welcomeText.innerHTML = `
          Step into a visually stunning journey through Earthâ€™s weather systems with an intuitive and interactive 3D globe.
          Discover global climate insights, animated forecasts, and real-time atmospheric patterns. <br><br>
          <strong>Scroll down to zoom into the globe and find detailed weather information.</strong>
        `;
      }
    </script>
  </body>
</html>
